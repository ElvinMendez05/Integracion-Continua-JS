name: Alerta IntegraciÃ³n Continua JS

on:
  push:
    branches:
      - main

jobs:
  notificar:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout del cÃ³digo
        uses: actions/checkout@v3

      - name: Ejecutar index.js
        run: node index.js

      - name: Enviar notificaciÃ³n a ntfy.sh
        run: |
          COMMIT_HASH=$(git rev-parse --short HEAD)
          AUTHOR=$(git log -1 --pretty=format:'%an')
          MESSAGE=$(git log -1 --pretty=format:'%s')

          curl -d $'ğŸš€ CI/CD - 
            IntegraciÃ³n Continua JS\nâœ… BUILD EXITOSO\n\n
            ğŸ‘¨â€ğŸ“Estudiante: Elvin Mendez (20240104)\n
            ğŸ“šCurso: IntegraciÃ³n Continua\n
            ğŸ‘¨â€ğŸ« Profesor: Elvys Cruz\n\n
            ğŸ“‚ Repositorio: ElvinMendez05/Integracion-Continua-JS\n
            ğŸŒ¿ Rama: main\nğŸ“ Commit: '"$COMMIT_HASH"$'\n
            âœï¸ Autor: '"$AUTHOR"$'\n
            ğŸ’¬ Mensaje: '"$MESSAGE"$'\n\n
            ğŸ”— Ver detalles: https://github.com/ElvinMendez05/Integracion-Continua-JS/actions/runs/\n
            ğŸ·ï¸ Etiquetas: github, ci, devops, itla' https://ntfy.sh/devops-itla
